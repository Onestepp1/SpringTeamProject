<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="travel.project.mapper.PackMapper">
	
	<!-- 목적지 리스트 -->	
	<resultMap id="DestinationMap" type="Destination">
        <id property="id" column="id"/>
        <result property="destinationName" column="destination_Name"/>
        <result property="country" column="country"/>
        <result property="destinationDescription" column="destination_Description"/>
    </resultMap>

	<!-- 호텔 등록 -->
    <insert id="saveHotel" parameterType="Hotels">
        INSERT INTO hotels (Hotel_Name, Destination_name, Star_Rating, Description)
        VALUES (#{hotelName},#{destinationName}, #{starRating}, #{description})
    </insert>
	
	<!-- 호텔 이름으로 찾기 -->
	<select id="selectOne" resultType="Hotels" parameterType="String">
		SELECT * FROM hotels where Hotel_Name=#{hotelName}
	</select>
	
	<!-- 호텔 편의시설 등록 -->
	<insert id="saveHotelAmenities" >
		INSERT INTO hotelAmenities(Hotel_ID, Amenity) VALUES
		 <foreach item="amenity" collection="amenities" separator=",">
            (#{id}, #{amenity})
        </foreach> 
	</insert>
	
	<!-- 호텔 이미지 등록 -->
	<insert id="saveHotelImg" >
		INSERT INTO hotels_img(Img_Name, Hotel_Id) VALUES
		 <foreach item="imgName" collection="imgNames" separator=",">
            (#{imgName}, #{id})
        </foreach> 
	</insert>

	<select id="findAllPacks" resultType="Pack">
		select * from trips
	</select>

	<select id="findPacksByDestination" parameterType="String" resultType="Pack">
		SELECT * from trips WHERE destination_name LIKE CONCAT(#{destination}, '%')
	</select>


	
	<!-- Destination 등록 -->
	<insert id="saveDestination" parameterType="Destination" useGeneratedKeys="true" keyProperty="destinationId">
		INSERT INTO destinations(destination_name, Country, destination_description)
		VALUES (#{destinationName}, #{country}, #{destinationDescription})
	</insert>
	
	<!-- Destination 리스트 반환 -->
	<select id="findAllDestination" resultMap="DestinationMap">
		SELECT * FROM destinations
	</select>
	
	<insert id="saveRestaurant" parameterType="Restaurants">
		INSERT INTO Restaurants(Destination_ID, restaurant_Name, Cuisine, restaurant_Description)
		VALUES (#{id}, #{restaurantName}, #{cuisine}, #{restaurantDescription})
	</insert>

	<select id="findPackById">
		SELECT * from trips where trip_id = #{tripId}
	</select>


</mapper>